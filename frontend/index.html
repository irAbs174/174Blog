{% extends "layout/base.html" %}
{% load static %}
{% block META_DATA %}
    <meta content="{{ description }}" name="description">
    <meta content="{{ team }}" name="author">
    <meta content="{{ keywords }}" name="keywords">
{% endblock META_DATA %}
{% block TITLE %}{{ title }}{% endblock TITLE %}
{% block CONTENT %}
{% include 'layout/components/switcher-wrapper.html' %}
<!-- PAGE -->
<div class="page">
    <div class="page-main">
        {% include 'layout/components/app-header.html' %}
        {% include 'layout/components/app-sidebar.html' %}
        <!--app-content open-->
        <div class="main-content app-content mt-0">
            <div class="side-app">
                <!-- CONTAINER -->
                <div class="main-container container-fluid">
                    {% include 'layout/components/page-header.html' %}
                        <div class="row row-cards">
                            <div class="col-xl-9 col-lg-8">
                                <div class="tab-content">
                                    <div class="tab-pane active" id="tab-11" role="tabpanel">
                                            <div class="row post">
                                            </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                </div>
                <!-- CONTAINER CLOSED -->
            </div>
        </div>
        <!--app-content closed-->
    </div>
    {% include 'layout/components/footer.html' %}
</div>
</div>
{% include 'layout/components/back-to-top.html' %}

    <!-- JQUERY JS -->
<script src="{% static '' %}/js/jquery.min.js"></script>
<!-- BOOTSTRAP JS -->
<script src="{% static '' %}/plugins/bootstrap/js/popper.min.js"></script>
<script src="{% static '' %}/plugins/bootstrap/js/bootstrap.min.js"></script>
<!-- INPUT MASK JS-->
<script src="{% static '' %}/plugins/input-mask/jquery.mask.min.js"></script>
<!-- Ion.RangeSlider js-->
<script src="{% static '' %}/plugins/jquery-uislider/jquery-ui.js"></script>
<script src="{% static '' %}/js/slider.js"></script>
<!-- TypeHead js -->
<script src="{% static '' %}/plugins/bootstrap5-typehead/autocomplete.js"></script>
<script src="{% static '' %}/js/typehead.js"></script>
<!-- INTERNAL SELECT2 JS -->
<script src="{% static '' %}/plugins/select2/select2.full.min.js"></script>
<script src="{% static '' %}/js/select2.js"></script>
<!-- Perfect SCROLLBAR JS-->
<script src="{% static '' %}/plugins/p-scroll/perfect-scrollbar.js"></script>
<script src="{% static '' %}/plugins/p-scroll/pscroll.js"></script>
<script src="{% static '' %}/plugins/p-scroll/pscroll-1.js"></script>
<!-- SIDE-MENU JS -->
<script src="{% static '' %}/plugins/sidemenu/sidemenu.js"></script>
<!-- SIDEBAR JS -->
<script src="{% static '' %}/plugins/sidebar/sidebar.js"></script>
<!-- Color Theme js -->
<script src="{% static '' %}/js/themeColors.js"></script>
<!-- Sticky js -->
<script src="{% static '' %}/js/sticky.js"></script>
<!-- CUSTOM JS -->
<script src="{% static '' %}/js/custom.js"></script>
<!-- Custom-switcher -->
<script src="{% static '' %}/js/custom-swicher.js"></script>
<!-- Switcher js -->
<script src="{% static '' %}/switcher/js/switcher.js"></script>

<script>
    let content_api = 'http://localhost:8000';
    let assets_api = 'https://strange-kare-ive7vog0s.liara.run/assets';
    let menu_uri = 'api/menu/list'

    function load_menu(){
                $.ajax({
            url: `${content_api}/${menu_uri}`,
            method: 'POST',
            success: function(res){
                let data = res.data;
                for (let x = 0; x <= data.length; x++){
                    $('.side-menu').append(`
                        <li class="slide is-expanded">
                            <a class="side-menu__item" data-bs-toggle="slide" href="javascript:void(0)">
                                <i class="side-menu__icon fe fe-slack"></i>
                                <span class="side-menu__label">${data[x].title}</span>
                                <i class="angle fe fe-chevron-right"></i>
                            </a>
                            <ul class="slide-menu" style="display: block;">
                            </ul>
                        </li>
                    `);
                    for (let s = 0; s <= data[x].children.length; s++){
                        $('.slide-menu').append(`
                                <li><a class="slide-item" href="${data[x].children[s].url}">${data[x].children[s].title}</a></li>
                        `)
                    }
                };
            },
        });
    }
    
    function load_posts(){
        let uri = 'api/blog/post/list';
        $.ajax({
                url: `${content_api}/${uri}`,
                method: 'POST',
                data: {'page': 1},
                success: function(response){
                    data = response.data;
                    for (let i=0; i <= data.length; i++){
                        $('.post').append(`
                                            <div class="col-md-6 col-xl-4 col-sm-6">
                                                <div class="card">
                                                    <div class="product-grid6">
                                                        <div class="product-image6 p-5">
                                                            <ul class="icons">
                                                                <li>
                                                                    <a class="btn btn-primary" href="shop-description.html">
                                                                        <i class="fe fe-eye"> </i> </a>
                                                                </li>
                                                                <li><a class="btn btn-success" href="add-product.html"><i class="fe fe-edit"></i></a></li>
                                                                <li><a class="btn btn-danger" href="javascript:void(0)"><i class="fe fe-x"></i></a></li>
                                                            </ul>
                                                            <a href="shop-description.html">
                                                                <img alt="img" class="img-fluid br-7 w-100" src="${assets_api}/${data[i].image}">
                                                            </a>
                                                        </div>
                                                        <div class="card-body pt-0">
                                                            <div class="product-content text-center">
                                                                <h1 class="title fw-bold fs-20"><a href="shop-description.html">${data[i].title}</a></h1>
                                                                <div class="mb-2 text-warning">
                                                                    <i class="fa fa-star text-warning"></i>
                                                                    <i class="fa fa-star text-warning"></i>
                                                                    <i class="fa fa-star text-warning"></i>
                                                                    <i class="fa fa-star text-warning"></i>
                                                                    <i class="fa fa-star-o text-warning"></i>
                                                                </div>
                                                            </div>
                                                            <div>دسته بندی: <i> ${data[i].category}</i></div>
                                                            <div>نویسنده: <i> ${data[i].writer}</i></div>
                                                        </div>
                                                        <div class="card-footer text-center">
                                                            <a class="btn btn-outline-primary mb-1" href="/${data[i].category}/${data[i].sku}"><i class="fe fe-eye mx-2 wishlist-icon"></i>مشاهده</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                        `)
                    }
                },
            })
    };
    load_menu();
    load_posts();

</script>

{% endblock CONTENT %}